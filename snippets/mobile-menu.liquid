{% assign main_menu_linklist = linklists[section.settings.menu].links %}

{% for link in main_menu_linklist %}
  {% assign link_handle = link.handle | replace: '-', '_' %}
  {% if link.links != blank %}

    <div x-data="{ {{ link_handle }}: false}" class="relative">
      <button
        @click="{{ link_handle }} = ! {{ link_handle }}"
        type="button"
        class="text-base text-gray-500 hover:text-gray-900 flex items-center justify-between w-full">
        <div>{{ link.title }}</div>
        {% render 'icon-dropdown' %}
      </button>

      <div x-show="{{ link_handle }}" class="grid gap-y-7 py-3">
        {% for childlink in link.links %}
          <a href="#" class="-m-3 p-3 mt-2 flex items-center rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-50">
            <span class="ml-3 text-base font-medium text-gray-500">{{ childlink.title }}</span>
          </a>
        {% endfor %}
      </div>
    </div>

  {% else %}
    <a href="#" class="-m-3 p-3 flex items-center rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-50">
      {{ link.title }}
    </a>

  {% endif %}
{% endfor %}